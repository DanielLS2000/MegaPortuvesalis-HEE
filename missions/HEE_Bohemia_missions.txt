# Missions for bohemia
boh_first_branch = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
	}
	has_country_shield = yes

	boh_protect_nitra = {
		icon = mission_apostolic_kingdom
		position = 2
		required_missions = { boh_hussite_wars_aftermath }
		provinces_to_highlight = {
			OR = {
				area = slovakia_area
				area = silesia_area
				area = lusatia_area
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				owner = { 
					NOT = { alliance_with = ROOT }
				}
				owner = { 
					overlord = {
						NOT = { alliance_with = ROOT }
					}
				}
			}
		}
		trigger = {
			OR = {
				AND = {
					slovakia_area = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT 
							custom_trigger_tooltip = {
								tooltip = owned_by_ally_or_ally_subject_tt
								owner = {
									OR = {
										alliance_with = ROOT
										overlord = { alliance_with = ROOT }
									}
								}
							}
						}
						type = all 
					}
					silesia_area = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT 
							custom_trigger_tooltip = {
								tooltip = owned_by_ally_or_ally_subject_tt
								owner = {
									OR = {
										alliance_with = ROOT
										overlord = { alliance_with = ROOT }
									}
								}
							}
						}
						type = all 
					}
					lusatia_area = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT 
							custom_trigger_tooltip = {
								tooltip = owned_by_ally_or_ally_subject_tt
								owner = {
									OR = {
										alliance_with = ROOT
										overlord = { alliance_with = ROOT }
									}
								}
							}
						}
						type = all 
					}
				}
				SLO = { is_subject_of = ROOT } 
				SLO = { 
					alliance_with = ROOT 
					has_opinion = {
						who = ROOT 
						value = 190 
					}
					if = {
						limit = { has_dlc = "Leviathan" }
						trust = { 	
							who = ROOT 
							value = 100 
						}
					}
					is_at_war = no 
					NOT = { total_development = ROOT } 
					NOT = { army_size = ROOT } 
				}
			}
		}
		effect = {
			custom_tooltip = pol_if_completed_via_diplomatic_relations_tt
			tooltip = {
				country_event = { id = flavor_boh.26 }
			}
			custom_tooltip = pol_alternatively_tt
			tooltip = {
				if = { 
					limit = { 
						has_dlc = "Leviathan" 
						154 = { 
							NOT = { 
								has_great_project = {
									type = golden_kremnica
									tier = 3 
								}
							}
							country_or_non_sovereign_subject_holds = ROOT 
						}
					} 
					154 = { 
						add_great_project_tier = {
							type = golden_kremnica 
							tier = 1 
						}
					}	
				}
				else_if = {
					limit = { 
						OR = { 
							NOT = { has_dlc = "Leviathan" }
							154 = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
							154 = { 
								has_great_project = {
									type = golden_kremnica 
									tier = 3 
								}
							}
						}
					}
					add_prestige = 20 
				}
				if = { 
					limit = { 
						SLO = { is_subject_of = ROOT } 
					}
					SLO = { add_liberty_desire = -20 } 
				}
				custom_tooltip = pol_every_mil_building_1_base_development_mil_tt
			}
			hidden_effect = {
				if = {
					limit = {
						SLO = { alliance_with = ROOT }
					}
					SLO = { 
						country_event = { id = flavor_boh.26 }
					}
				}
				else_if = {
					limit = { 
						has_dlc = "Leviathan" 
						154 = { 
							NOT = { 
								has_great_project = {
									type = golden_kremnica
									tier = 3 
								}
							}
							country_or_non_sovereign_subject_holds = ROOT 
						}
					} 
					154 = { 
						add_great_project_tier = {
							type = golden_kremnica
							tier = 1
						}
					}	
				}
				else_if = {
					limit = { 
						OR = { 
							NOT = { has_dlc = "Leviathan" }
							154 = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
							154 = { 
								has_great_project = {
									type = golden_kremnica 
									tier = 3 
								}
							}
						}
					}
					add_prestige = 20 
				}
				every_owned_province = { 
					limit = {
						OR = { 
							has_manpower_building_trigger = yes 
							has_forcelimit_building_trigger = yes 
							has_fort_building_trigger = yes 
						}
					} 
					add_base_manpower = 1 
				}
				if = { 
					limit = { 
						SLO = { is_subject_of = ROOT } 
					}
					SLO = { add_liberty_desire = -20 } 
				}
			}
		}
	}
	boh_lion_of_the_empire = {
		icon = the_imperial_border
		position = 4
		required_missions = { boh_protect_nitra }

		provinces_to_highlight = {
			NOT = { 
				owned_by = ROOT
			}
			owner = {
				is_part_of_hre = yes
				OR = {
					total_development = ROOT
					army_size = ROOT
				}
			}
		}

		trigger = {
			army_size = 25
			prestige = 40
			custom_trigger_tooltip = {
				tooltip = boh_most_army_hre
				NOT = {
					any_country = {
						is_part_of_hre = yes
						army_size = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = boh_most_development_hre
				NOT = {
					any_country = {
						is_part_of_hre = yes
						total_development = ROOT
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = boh_lion_of_the_empire
				duration = 5475
			}
			if = {
				limit = {
					exists = MAZ
				}
				custom_tooltip = boh_saxony_exists_tt_yes
				tooltip = {
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 360
						target = MAZ
					}
				}
			}
			else = {
				custom_tooltip = boh_saxony_exists_tt_no
				tooltip = {
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 360
						target = MAZ
					}
				}
			}
			if = {
				limit = {
					NOT = {
						exists = MAZ
					}
				}
				custom_tooltip = boh_saxony_doesnt_exist_tt_yes
				tooltip = {
					mazovia_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				custom_tooltip = boh_saxony_doesnt_exist_tt_no
				tooltip = {
					mazovia_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			if = {
				limit = {
					exists = Z3V
				}
				custom_tooltip = boh_brandenburg_exists_tt_yes
				tooltip = {
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 360
						target = Z3V
					}
				}
			}
			else = {
				custom_tooltip = boh_brandenburg_exists_tt_no
				tooltip = {
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 360
						target = Z3V
					}
				}
			}
			if = {
				limit = {
					NOT = {
						exists = Z3V
					}
				}
				custom_tooltip = boh_brandenburg_doesnt_exist_tt_yes
				tooltip = {
					minsk_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				custom_tooltip = boh_brandenburg_doesnt_exist_tt_no
				tooltip = {
					minsk_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						exists = MAZ
					}
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 360
						target = MAZ
					}
				}
				else = {
					mazovia_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				if = {
					limit = {
						exists = Z3V
					}
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 360
						target = Z3V
					}
				}
				else = {
					minsk_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}
	boh_guardian_empire = {
		icon = league_of_the_public_weal
		position = 5
		required_missions = { boh_lion_of_the_empire }
		provinces_to_highlight = {
			province_has_current_tech_fort_trigger = no
			region = carpathia_region
			country_or_non_sovereign_subject_holds = ROOT
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				province_has_current_tech_fort_trigger = yes
				region = carpathia_region
			}
			if = {
				limit = {
					exists = BYZ
				}
				army_strength = {
					who = BYZ
					value = 0.5
				}
			}
			else = {
				army_size = 50
			}
			is_subject = no
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Golden Century"
				}
				custom_tooltip = boh_unlock_order_of_the_dragon
				set_country_flag = boh_unlocked_order_of_the_dragon
			}
			else = {
				add_mil_power = 100
			}
			podolia_volhynia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			west_dniepr_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			custom_tooltip = boh_protect_against_turk_tt
			hidden_effect = {
				carpathia_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT	}
						NOT = { is_core = ROOT	}
						owner = {
							religion = orthodox
						}
					}
					add_claim = ROOT
				}
				balkan_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT	}
						NOT = { is_core = ROOT	}
						owner = {
							religion = orthodox
						}
					}
					add_claim = ROOT
				}
			}
		}
	}
	boh_ruthenian_lands = {
		icon = mission_pol_tend_east
		position = 6
		required_missions = { boh_guardian_empire }
		provinces_to_highlight = {
			OR = {
				area = podolia_volhynia_area
				area = red_ruthenia_area
				area = volhynia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				OR = {
					area = podolia_volhynia_area
					area = red_ruthenia_area
					area = volhynia_area
				}
			}
		}
		effect = {
			country_event_with_option_insight = {
				id = flavor_boh.30
				option_1 = "
					add_country_modifier = {
						name = hab_austrian_empire
						duration = -1
					}
				"

				option_2 = "
					custom_tooltip = HAB_UNLOCK_NOBLES_PRIVILEGE_FOR_CULTURAL_MINORITIES
				"
			}
		}
	}
	boh_invest_in_eastern_poland = {
		icon = reclaim_the_ducal_lands
		position = 7
		required_missions = { boh_ruthenian_lands }
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					province_has_center_of_trade_of_level = 3 
					has_manufactory_trigger = yes 
				}
				value = 40 
			}
			OR = { 
				has_global_modifier_value = {
					which = global_trade_goods_size_modifier 
					value = 0.40
				}
				num_of_trading_bonuses = 7 
				AND = { 
					full_idea_group = economic_ideas 
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						has_manufactory_trigger = yes 
						development = 35 
						value = 6 
					}
				}
			}
		}
		effect = {
			if = { 
				limit = { 
					NOT = { has_institution = industrialization }
					NOT = { num_of_ruler_traits = { amount = 3 } }
					has_dlc = "Rights of Man"
				}
				add_ruler_personality = industrious_personality 
			}
			else = { 
				change_ruler_stat = {
					type = adm
					amount = 1
				}
			}
			custom_tooltip = pol_upgrade_wool_to_cloth_tt
			custom_tooltip = pol_1_merc_per_trading_bonus_tt
			hidden_effect = {
				
				every_owned_province = { 
					limit = { trade_goods = wool } 
					change_trade_goods = cloth 
				}
				if = { 
					limit = { num_of_trading_bonuses = 10 } 
					add_mercantilism = 10 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 9 } 
					add_mercantilism = 9 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 8 } 
					add_mercantilism = 8 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 7 } 
					add_mercantilism = 7 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 6 } 
					add_mercantilism = 6 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 5 } 
					add_mercantilism = 5 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 4 } 
					add_mercantilism = 4 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 3 } 
					add_mercantilism = 3 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 2 } 
					add_mercantilism = 2 
				}
				else_if = { 
					limit = { num_of_trading_bonuses = 1 } 
					add_mercantilism = 1 
				}
			}
		}
	}
	boh_czech_silver_mines = {
		icon = mission_zambezi_gold
		position = 8
		required_missions = {  }
		provinces_to_highlight = {
			province_id = 2967
			OR = {
				NOT = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				NOT = {
					base_production = 7
				}
			}
		}
		trigger = {
			gold_income = 5
			2967 = {
				country_or_non_sovereign_subject_holds = ROOT
				base_production = 7
			}
		}
		effect = {
			2967 = {
				add_province_modifier = {
					name = hab_tirol_mine
					duration = -1
				}
			}

			complex_dynamic_effect = {
				first_custom_tooltip = HAB_IF_NO_TIROL_EVENT
				first_limit = "
					2967 = {
						NOT = { has_province_modifier = hab_schwaz_mine }
					}
				"
				first_effect = "
					set_country_flag = boh_guaranteed_silver_mine_flag
					country_event = { id = flavor_boh.10011 }
				"
			}
		}
	}
	boh_support_the_merchants = {
		icon = the_shape_of_trades_to_come
		position = 9
		required_missions = { boh_czech_silver_mines }
		provinces_to_highlight = { province_id = 262 }
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				has_trade_building_trigger = yes 
				value = 5 
			}
			OR = { 
				mercantilism = 25 
				estate_loyalty = { 
					estate = estate_burghers 
					loyalty = 60 
				}
			}
			OR = {
				num_of_centers_of_trade = 6
				262 = {
					trade_share = {
						country = ROOT
						share = 50
					}
				}
			}
		}
		effect = {
			custom_tooltip = pol_if_mercantilism_reward_tt
			custom_tooltip = pol_alternatively_tt
			tooltip = { set_estate_privilege = estate_burghers_polish_merchant_seal }
			hidden_effect = {
				if = { 
					limit = { 
						has_dlc = "Rights of Man"
						mercantilism = 25 
						NOT = { num_of_ruler_traits = { amount = 3 } }
					} 
					add_ruler_personality = entrepreneur_personality
					set_country_flag = enable_special_trader_flag
				}
				else_if = { 
					limit = { mercantilism = 25 } 
					change_ruler_stat = {
						type = dip
						amount = 1
					}
					set_country_flag = enable_special_trader_flag
				}
				else = { 
					set_estate_privilege = estate_burghers_polish_merchant_seal 
				}
			}
		}
	}
	boh_bohemian_government = {
		icon = imperial_ascendancy
		position = 10
		required_missions = { boh_support_the_merchants }
		provinces_to_highlight = {
			owned_by = root
			NOT = { culture_group = root }
			OR = {
				unrest = 1
				nationalism = 1
				local_autonomy = 1
			}
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						value = 30
						culture_group = root
						NOT = { unrest = 1 }
						NOT = { nationalism = 1 }
						NOT = { local_autonomy = 1 }
					}
				}
			}
		}
		trigger = {
			adm_tech = 10
			num_of_owned_provinces_with = {
				value = 30
				culture_group = root
				NOT = { unrest = 1 }
				NOT = { nationalism = 1 }
				NOT = { local_autonomy = 1 }
			}
		}
		effect = {
			if = {
				limit = { 
					government = monarchy
					is_revolutionary = no 
				}
				country_event = { id = flavor_boh.10020 }
			}
			else = {
				add_country_modifier = {
					name = hab_tolerant_society
					duration = -1
				}
			}
		}
	}
	boh_jewel_of_the_empire = {
		icon = the_viennese_waltz
		position = 11
		required_missions = { boh_bohemian_government boh_vladislav_hall }
		provinces_to_highlight = {
			province_id = 266
			OR = {
				NOT = { owned_by = root }
				NOT = { development = 50 }
				NOT = { num_of_buildings_in_province = 6 }
			}
		}
		trigger = {
			266 = {
				owned_by = root
				development = 50
				num_of_buildings_in_province = 6
			}
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
			has_mil_advisor_3 = yes
			is_in_deficit = no
		}
		effect = {
			266 = {
				add_province_modifier = {
					name = hab_viennese_ballrooms
					duration = -1
				}
			}
		}
	}
	boh_cultural_flowering = {
		icon = mission_plc_cultural_flowering
		position = 12
		required_missions = { boh_jewel_of_the_empire }
		trigger = {
			if = { 
				limit = { has_dlc = "Rule Britannia" } 
				OR = { 
					monthly_adm = 15 
					innovativeness = 75
				}
			}
			else = { prestige = 90 } 
			if = {
				limit = { has_dlc = "Rights of Man" } 
				OR = { 
					full_idea_group = innovativeness_ideas 
					ruler_has_personality = free_thinker_personality 
					ruler_has_personality = scholar_personality 
					ruler_total_stats = {
						amount = 14 
					}
				}
			}
			else = { 
				OR = { 
					full_idea_group = innovativeness_ideas 
					ruler_total_stats = {
						amount = 14 
					}
				}
			}
			if = {	
				limit = { has_dlc = "Mandate of Heaven" }
				OR = { 
					in_golden_age = yes 
					has_had_golden_age = yes 
					monthly_income = 300 
				}
			}
			else = { monthly_income = 250 } 
		}
		effect = {
			add_country_modifier = {
				name = pol_cultural_flowering_polish_domain_modifier
				duration = 9125 
			}
			if = { 
				limit = { 
					NOT = { innovativeness = 97 } 
					has_dlc = "Rule Britannia" 
				}
				change_innovativeness = 3 
			}
			else = { 
				add_adm_power = 50 
				add_dip_power = 50 
				add_mil_power = 50 
			}
		}
	}
	boh_peace_in_europe = {
		icon = peace_in_europe
		position = 13
		required_missions = { boh_cultural_flowering boh_the_balance_of_power }
		trigger = {
			is_at_war = no
			if = {
				limit = {
					hre_size = 1
				}
				calc_true_if = {
					all_province = {
						is_part_of_hre = yes
					}
					amount = 250
				}
				is_emperor = yes
			}
			else = {
				total_development = 2000
			}
		}
		effect = {
			change_dip = 1
			add_country_modifier = {
				name = "boh_peace_in_europe"
				duration = -1
			}
		}
	}
}

boh_second_branch = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
	}
	has_country_shield = yes

	boh_incorporate_the_slovaks = {
		icon = mission_recover_nitrava
		position = 3
		required_missions = { boh_protect_nitra }
		provinces_to_highlight = {
			area = slovakia_area
			NOT = {
				owned_by = ROOT
			}
		}
		trigger = {
			slovakia_area = {
				type = all
				owned_by = ROOT
			}
		}
		effect = {
			add_accepted_culture_or_dip_power = { culture = slovak free = yes }
			set_country_flag = boh_czechoslovak_brotherhood_flag
			custom_tooltip = boh_every_province_slovakia
			hidden_effect = {
				slovakia_area = {
					limit = { owned_by = ROOT }
					add_random_development = 1
				}
			}
		}
	}
	boh_cool_general = {
		icon = mission_bozi_bojovnici
		position = 5
		required_missions = { boh_establish_zapadoslavia }
		trigger = {
			army_tradition = 60
			has_mil_advisor_2 = yes
			custom_trigger_tooltip = {
				tooltip = boh_has_won_20_battles
				check_variable = { which = bohemia_num_of_won_battles value = 20 }
			}
		}
		effect = {
			unlock_government_reform = {
				government_reform = vozove_hradby_reform
			}
		}
	}
	boh_slovak_cities = {
		icon = imperial_capitals
		position = 6
		required_missions = { boh_balance_princely_lands }
		provinces_to_highlight = {  
			region = carpathia_region
			country_or_non_sovereign_subject_holds = ROOT
			OR = {
				NOT = { development = 20 }
				NOT = { num_of_buildings_in_province = 3 }
			}
		} 
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				region = carpathia_region
				development = 20
				num_of_buildings_in_province = 3
			}
		}
		effect = {
			change_government_reform_progress = 50
			custom_tooltip = HAB_5_RANDOM_PROVINCES_THAT_MEET_REQUIREMENT_GAIN
			tooltip = {
				add_province_modifier = {
					name = hab_south_german_cities
					duration = -1
				}
				1772 = { add_or_upgrade_tax_building = yes }
			}
			hidden_effect = {
				for = {
					amount = 5
					effect = "
						random_owned_province = {
							limit = {
								region = carpathia_region
								development = 20
								num_of_buildings_in_province = 3
								NOT = {
									has_province_modifier = hab_south_german_cities
								}
							}
							add_province_modifier = {
								name = hab_south_german_cities
								duration = -1
							}
							add_or_upgrade_tax_building = yes
						}
					"
				}
			}
		}
	}
	boh_bohemian_crystal = {
		icon = bohemian_crystal
		position = 8
		required_missions = {  }
		provinces_to_highlight = {
			OR = {
				province_id = 1771
				province_id = 4238
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { has_production_building_trigger = yes }
				NOT = { num_of_times_improved = 5 }
			}
		}
		trigger = {
			1771 = {
				owned_by = ROOT
				num_of_times_improved = 5
				has_production_building_trigger = yes
			}
			4238 = {
				owned_by = ROOT
				num_of_times_improved = 5
				has_production_building_trigger = yes
			}
		}
		effect = {
			set_country_flag = bohemian_crystal_flag
			country_event = { id = prices.43 }
			custom_tooltip = boh_crystal_event_insight_tt
			if = {
				limit = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						trade_goods = glass
						value = 3
					}
				}
				custom_tooltip = boh_3_glass_province_yes
				tooltip = {
					1771 = {
						add_or_upgrade_production_building = yes
					}
				}
			}
			else = {
				custom_tooltip = boh_3_glass_province_no
				tooltip = {
					1771 = {
						add_or_upgrade_production_building = yes
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
							trade_goods = glass
							value = 3
						}
					}
					1771 = {
						add_or_upgrade_production_building = yes
					}
				}
			}
		}
	}
	boh_vladislav_hall = {
		icon = mission_lit_jesuit_academy
		position = 10
		required_missions = { boh_the_golden_city }
		provinces_to_highlight = {
			province_id = 266
		}
		trigger = {
			owns = 266
			266 = {
				development = 45
			}
			266 = {
				has_courthouse_building_trigger = yes
			}
			OR = {
				crown_land_share = 60
				monthly_dip = 10
				DIP = 5
			}
		}
		effect = {
			266 = {
				add_or_upgrade_courthouse_building = yes
			}
			custom_tooltip = boh_building_courthouses_bonus
			hidden_effect = {
				set_country_flag = fra_courthouse_bonus_flag
				every_owned_province = {
					limit = {
						has_courthouse_building_trigger = yes
					}
					add_province_modifier = {
						name = fra_improved_court_houses_modifier
						duration = -1
					}
				}
			}
		}
	}
	boh_holdings_in_india = {
		icon = mission_indian_trade_company
		position = 14
		required_missions = { boh_the_ostend_company }
		provinces_to_highlight = {
			OR = {
				region = bengal_region
				region = deccan_region
				region = west_india_region
				region = coromandel_region
			}
			has_port = yes
			province_has_center_of_trade_of_level = 1
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				OR = {
					region = bengal_region
					region = deccan_region
					region = west_india_region
					region = coromandel_region
				}
				has_port = yes
				province_has_center_of_trade_of_level = 1
			}
		}
		effect = {
			custom_tooltip = HAB_GRANT_CLAIMS_ON_CHINESE_PORTS
			hidden_effect = {
				north_china_region = {
					limit = {
						NOT = { country_or_non_sovereign_subject_holds = ROOT }
						NOT = { is_permanent_claim = ROOT }
						NOT = { owned_by = ROOT }
						has_port = yes
						province_has_center_of_trade_of_level = 1
					}
					add_permanent_claim = ROOT
				}
				south_china_region = {
					limit = {
						NOT = { country_or_non_sovereign_subject_holds = ROOT }
						NOT = { is_permanent_claim = ROOT }
						NOT = { owned_by = ROOT }
						has_port = yes
						province_has_center_of_trade_of_level = 1
					}
					add_permanent_claim = ROOT
				}
			}

			custom_tooltip = SEPERATOR_TOOLTIP

			add_mercantilism_or_monarch_power = { amount = 3 }

			custom_tooltip = SEPERATOR_TOOLTIP
			
			add_dip_power = 50
		}
	}
}

boh_third_branch = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
	}
	has_country_shield = yes

	boh_hussite_wars_aftermath = {
		icon = mission_pol_varna_aftermath
		position = 1
		required_missions = {  }
		trigger = {
			OR = {
				custom_trigger_tooltip = { 
					tooltip = boh_had_start_event_tt
					OR = { 
						has_country_flag = boh_tolerance_flag
						has_country_flag = boh_intolerance_flag
					}
				}
				tag = ZPD
				current_age = age_of_reformation
			}
			num_of_allies = 2
			army_size_percentage = 0.9
			SIL = {
				OR = { 
					alliance_with = ROOT 
					is_rival = ROOT 
					is_subject_of = ROOT 
					has_opinion_modifier = {
						who = ROOT
						modifier = insulted
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = scornfully_insulted
					}
					exists = no 
				}
			}
			SLO = { 
				OR = { 
					alliance_with = ROOT 
					is_rival = ROOT 
					is_subject_of = ROOT 
					has_opinion_modifier = {
						who = ROOT
						modifier = insulted
					}
					has_opinion_modifier = {
						who = ROOT
						modifier = scornfully_insulted
					}
					exists = no 
				}
			}
		}
		effect = {
			if = {
				limit = {
					NOT = { has_country_flag = boh_intolerance_flag }
					NOT = { has_country_flag = boh_tolerance_flag }
				}
				custom_tooltip = boh_before_event_goes_tt
			}
			if = {
				limit = { has_country_flag = boh_intolerance_flag }
				tooltip = {
					if = {
						limit = { 
							has_country_flag = boh_intolerance_flag
							SIL = { 
								NOT = { 
									OR = {
										alliance_with = ROOT 
										is_subject_of = ROOT
									}
								}
							}
						}
						silesia_area = { 
							limit = { 
								NOT = { is_core = ROOT } 
								NOT = { is_permanent_claim = ROOT } 
							}
							add_permanent_claim = ROOT 
						}
						lusatia_area = { 
							limit = { 
								NOT = { is_core = ROOT } 
								NOT = { is_permanent_claim = ROOT } 
							}
							add_permanent_claim = ROOT 
						}
						slovakia_area = { 
							limit = { 
								NOT = { is_core = ROOT } 
								NOT = { is_permanent_claim = ROOT } 
							}
							add_permanent_claim = ROOT 
						}
						if = {
							limit = {
								SLO = { 
									NOT = { 
										OR = {
											alliance_with = ROOT 
											is_subject_of = ROOT
										}
									}
									valid_for_personal_unions_trigger = yes 
								}
							}
							add_casus_belli = {
								type = cb_restore_personal_union
								months = 300
								target = SLO
							}
						}
						else = {
							silesia_area = { 
								limit = { 
									NOT = { is_core = ROOT } 
									NOT = { is_permanent_claim = ROOT } 
								}
								add_permanent_claim = ROOT 
							}
							lusatia_area = { 
								limit = { 
									NOT = { is_core = ROOT } 
									NOT = { is_permanent_claim = ROOT } 
								}
								add_permanent_claim = ROOT 
							}
							slovakia_area = { 
								limit = { 
									NOT = { is_core = ROOT } 
									NOT = { is_permanent_claim = ROOT } 
								}
								add_permanent_claim = ROOT 
							}
						}
					}
				}
			}
			if = {
				limit = { has_country_flag = boh_tolerance_flag }
				tooltip = {
					if = {
						limit = { 
							has_country_flag = boh_tolerance_flag
							SLO = { 
								NOT = { 
									OR = {
										alliance_with = ROOT 
										is_subject_of = ROOT
									}
								}
							}
						}
						silesia_area = { 
							limit = { 
								NOT = { is_core = ROOT } 
								NOT = { is_permanent_claim = ROOT } 
							}
							add_permanent_claim = ROOT 
						}
						lusatia_area = { 
							limit = { 
								NOT = { is_core = ROOT } 
								NOT = { is_permanent_claim = ROOT } 
							}
							add_permanent_claim = ROOT 
						}
						slovakia_area = { 
							limit = { 
								NOT = { is_core = ROOT } 
								NOT = { is_permanent_claim = ROOT } 
							}
							add_permanent_claim = ROOT 
						}
						if = {
							limit = {
								SIL = { 
									NOT = { 
										OR = {
											alliance_with = ROOT 
											is_subject_of = ROOT
										}
									}
									valid_for_personal_unions_trigger = yes 
								}
							}
							add_casus_belli = {
								type = cb_restore_personal_union
								months = 300
								target = SIL
							}
						}
						else = {
							silesia_area = { 
								limit = { 
									NOT = { is_core = ROOT } 
									NOT = { is_permanent_claim = ROOT } 
								}
								add_permanent_claim = ROOT 
							}
							lusatia_area = { 
								limit = { 
									NOT = { is_core = ROOT } 
									NOT = { is_permanent_claim = ROOT } 
								}
								add_permanent_claim = ROOT 
							}
							slovakia_area = { 
								limit = { 
									NOT = { is_core = ROOT } 
									NOT = { is_permanent_claim = ROOT } 
								}
								add_permanent_claim = ROOT 
							}
						}
					}
				}
			}
			#
			if = {
				limit = {
					SIL = {
						OR = { 
							alliance_with = ROOT
							is_subject_of = ROOT 
						}
					}
				}
				custom_tooltip = sil_friendship_yes_tt
			}
			else = {
				custom_tooltip = sil_friendship_no_tt
			}
			tooltip = { 
				add_favors = {
					who = SIL 
					amount = 10 
				}
				SIL = { add_historical_friend = ROOT }
				add_historical_friend = SIL 
			}
			if = {
				limit = {
					SLO = {
						OR = { 
							alliance_with = ROOT
							is_subject_of = ROOT 
						}
					}
				}
				custom_tooltip = slo_friendship_yes_tt
			}
			else = {
				custom_tooltip = slo_friendship_no_tt
			}
			tooltip = { 
				add_favors = { 
					who = SLO 
					amount = 10 
				}
				SLO = { add_historical_friend = ROOT }
				add_historical_friend = SLO 
			}
			custom_tooltip = boh_impact_future_missions_tt 
			hidden_effect = {
				if = { 
					limit = { 
						SLO = {
							OR = {
								is_subject_of = ROOT
								alliance_with = ROOT
							}
						}
					}
					add_favors = { 
						who = SLO 
						amount = 10 
					}
					SLO = { add_historical_friend = ROOT }
					add_historical_friend = SLO 
				}
				else_if = {
					limit = {
						valid_for_personal_unions_trigger = yes 
						SLO = { 
							valid_for_personal_unions_trigger = yes 
						}
						has_country_flag = boh_intolerance_flag
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = SLO
					}
				}
				else = {
					silesia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					lusatia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					slovakia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
				}
				if = { 
					limit = { alliance_with = SIL } 
					add_favors = { 
						who = SIL 
						amount = 10 
					}
					SIL = { add_historical_friend = ROOT }
					add_historical_friend = SIL 
				}
				else_if = {
					limit = {
						valid_for_personal_unions_trigger = yes 
						SIL = { 
							valid_for_personal_unions_trigger = yes 
						}
						has_country_flag = boh_tolerance_flag 
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = SIL
					} 
				}
				else = {
					silesia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					lusatia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					slovakia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}					
				}
				if = {
					limit = {
						has_country_flag = boh_tolerance_flag 
						NOT = {
							OR = {
								SLO = { is_subject_of = ROOT }
								alliance_with = SLO
							}
						}
					}
					silesia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					lusatia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					slovakia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
				}
				if = {
					limit = {
						has_country_flag = boh_intolerance_flag 
						NOT = {
							OR = {
								SIL = { is_subject_of = ROOT }
								alliance_with = SIL
							}
						}
					}
					silesia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					lusatia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
					slovakia_area = { 
						limit = { 
							NOT = { is_core = ROOT } 
							NOT = { is_permanent_claim = ROOT } 
						}
						add_permanent_claim = ROOT 
					}
				}
			}
		}
	}
	boh_humiliate_milcenia = {
		icon = humiliate_austria
		position = 2
		required_missions = { boh_hussite_wars_aftermath }
		provinces_to_highlight = {
			owned_by = MEI
		}
		trigger = {
			is_subject = no
			if = {
				limit = {
					has_dlc = "Rights of Man"
				}
				OR = {
					MEI = { humiliated_by = ROOT }
					NOT = { exists = MEI }
					AND = {
						is_great_power = yes
						MEI = { is_great_power = no }
					}
				}
			}
			else = {
				OR = {
					MEI = { humiliated_by = ROOT }
					NOT = { exists = MEI }
				}
			}
		}
		effect = {
			add_dip_power = 100
			add_country_modifier = {
				name = boh_humiliated_habsburgs
				duration = 9125
			}
			hinter_pommern_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			neumark_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					MEI = { humiliated_by = ROOT }
				}
				custom_tooltip = boh_humiliated_hab_tt_yes
				tooltip = {
					add_prestige_or_monarch_power = {
						amount = 25
					}
				}
			}
			else = {
				custom_tooltip = boh_humiliated_hab_tt_no
				tooltip = {
					add_prestige_or_monarch_power = {
						amount = 25
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						MEI = { humiliated_by = ROOT }
					}
					add_prestige_or_monarch_power = {
						amount = 25
					}
				}
			}
		}
	}
	boh_karel_legacy = {
		icon = mission_the_renaissance_king
		position = 3
		required_missions = { boh_humiliate_milcenia }
		provinces_to_highlight = {
			OR = {
				area = lusatia_area
				area = neumark_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					area = lusatia_area
					area = neumark_area
				}
				value = 6
			}
		}
		effect = {
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 25
			}
			add_country_modifier = {
				name = boh_otakars_legacy
				duration = 7300
			}
			south_saxony_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			thuringia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			mittelmark_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			vorpommern_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			northern_saxony_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					has_country_modifier = boh_humiliated_habsburgs
				}
				custom_tooltip = boh_humiliated_permanent_yes
			}
			else = {
				custom_tooltip = boh_humiliated_permanent_no
			}
			hidden_effect = {
				if = {
					limit = {
						has_country_modifier = boh_humiliated_habsburgs
					}
					remove_country_modifier = boh_humiliated_habsburgs
					add_country_modifier = {
						name = boh_humiliated_habsburgs
						duration = -1
					}
				}
			}
		}
	}
	boh_establish_zapadoslavia = {
		icon = restore_great_moravia
		position = 4
		required_missions = { boh_incorporate_the_slovaks boh_karel_legacy boh_secure_the_vistula }
		trigger = {
			stability = 3
			prestige = 90
			legitimacy = 90
			total_development = 500
		}
		effect = {
			country_event = { id = flavor_boh.16 }
			custom_tooltip = boh_great_moravia_insight_tt
			tooltip = {
				add_ruler_modifier = {
					name = boh_svatopluks_heir
					duration = -1
				}
			}
		}
	}
	boh_balance_princely_lands = {
		icon = mission_pol_balance_princely_lands
		position = 5
		required_missions = { boh_establish_zapadoslavia }
		provinces_to_highlight = { 
			OR = { 
				area = silesia_area 
				area = wielkopolska_area
				area = central_poland_area
				area = malopolska_area
				area = slovakia_area
				area = lusatia_area
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				owner = { 
					NOT = { alliance_with = ROOT }
				}
				owner = { 
					overlord = {
						NOT = { alliance_with = ROOT }
					}
				}
			}
		}
		trigger = {
			silesia_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					custom_trigger_tooltip = {
						tooltip = owned_by_ally_or_ally_subject_tt
						owner = {
							OR = {
								overlord = { alliance_with = ROOT }
								alliance_with = ROOT
							}
						}
					}
				}
				type = all 
			}
			wielkopolska_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					custom_trigger_tooltip = {
						tooltip = owned_by_ally_or_ally_subject_tt
						owner = {
							OR = {
								overlord = { alliance_with = ROOT }
								alliance_with = ROOT
							}
						}
					}
				}
				type = all 
			}
			central_poland_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					custom_trigger_tooltip = {
						tooltip = owned_by_ally_or_ally_subject_tt
						owner = {
							OR = {
								overlord = { alliance_with = ROOT }
								alliance_with = ROOT
							}
						}
					}
				}
				type = all 
			}
			malopolska_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					custom_trigger_tooltip = {
						tooltip = owned_by_ally_or_ally_subject_tt
						owner = {
							OR = {
								overlord = { alliance_with = ROOT }
								alliance_with = ROOT
							}
						}
					}
				}
				type = all 
			}
			slovakia_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					custom_trigger_tooltip = {
						tooltip = owned_by_ally_or_ally_subject_tt
						owner = {
							OR = {
								overlord = { alliance_with = ROOT }
								alliance_with = ROOT
							}
						}
					}
				}
				type = all 
			}
			lusatia_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					custom_trigger_tooltip = {
						tooltip = owned_by_ally_or_ally_subject_tt
						owner = {
							OR = {
								overlord = { alliance_with = ROOT }
								alliance_with = ROOT
							}
						}
					}
				}
				type = all 
			}
			stability = 2
			grown_by_development = 350
			crown_land_share = 50
			legitimacy_equivalent = 90
		}
		effect = {
			1772 = {
				if = {
					limit = { 
						owner = { 
							OR = { 
								alliance_with = ROOT 
								is_subject_of = ROOT 
								tag = ROOT 
							}
						}
					}
					add_base_tax = 2
					add_base_production = 2 
					add_base_manpower = 2 
					add_building = town_hall
				}
			}
			262 = { 
				if = {
					limit = { 
						owner = { 
							OR = { 
								alliance_with = ROOT 
								is_subject_of = ROOT 
								tag = ROOT 
							}
						}
					}
					add_base_tax = 2
					add_base_production = 2 
					add_base_manpower = 2 
					add_building = town_hall
				}
			}
			if = { 
				limit = { has_reform = representation_of_the_crown_reform }
				add_ruler_modifier = {
					name = pol_stable_internal_affairs_modifier
					duration = -1 
				}
			}
			else = {
				custom_tooltip = pol_if_vassal_contracts_tt
				tooltip = {
					add_ruler_modifier = {
						name = pol_stable_internal_affairs_modifier
						duration = -1 
					}
				}
			}
			change_ruler_stat = {
				type = dip
				amount = 2
			}
		}
	}
	boh_bohemia_prospers = {
		icon = austria_prospers
		position = 6
		required_missions = { boh_balance_princely_lands }
		provinces_to_highlight = {
			culture = czech
			OR = {
				ROOT = {
					NOT = {
						development_in_provinces = {
							value = 180 #start:122
							culture = czech
						}
					}
				}
				AND = {
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								culture = czech
								has_manufactory_trigger = yes
							}
						}
					}
					has_manufactory_trigger = no
					owned_by = root
				}
			}
		}
		trigger = {
			development_in_provinces = {
				value = 180 #start:122
				culture = czech
			}
			num_of_owned_provinces_with = {
				value = 5
				culture = ROOT
				num_of_buildings_in_province = 3
				development = 20
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Mandate of Heaven"
				}
				distribute_development = {
					amount = 10
					type = tax
				}
				custom_tooltip = HAB_UNLOCK_PROSPERITY_EDICT
				set_country_flag = hab_prosperity_edict
			}
			else = {
				change_government_reform_progress = 50
				distribute_development = {
					amount = 15
					type = tax
				}
				add_country_modifier = {
					name = hab_prosperity_windfall
					duration = 7300
				}
			}
		}
	}
	boh_bohemian_commonwealth = {
		icon = bohemian_commonwealth
		position = 7
		required_missions = { boh_bohemia_prospers boh_ruthenian_lands boh_slovak_cities boh_breadbasket_of_europe boh_prussian_lands }
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						province_id = 266
						province_id = 262
						province_id = 50
						province_id = 61
						province_id = 134
						province_id = 153
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					region = balkan_region
					owner = {
						religion_group = muslim
					}
				}
			}
		}
		trigger = {
			266 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			262 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			43 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			61 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			153 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			1772 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			balkan_region = {
				type = all
				owner = {
					NOT = { religion_group = muslim }
				}
			}
		}
		effect = {
			override_country_name = BOH_COMMONWEALTH
			set_country_flag = is_BOH_COMMONWEALTH_flag
			set_country_flag = has_overriden_name_flag
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 50
			}
			custom_tooltip = boh_bohemian_commonwealth_tt
			hidden_effect = {
				if = {
					limit = {
						has_country_modifier = boh_premyslid_heritage_2
					}
					remove_country_modifier = boh_premyslid_heritage_2
					add_country_modifier = {
						name = boh_premyslid_heritage_3
						duration = -1
					}
				}
			}
		}
	}
	boh_recover_from_hussite_wars = {
		icon = mission_devastate_christianity
		position = 8
		required_missions = {  }
		provinces_to_highlight = {
			OR = {
				area = erzgebirge_area
				area = moravia_area
				area = bohemia_area
			}
			OR = {
				devastation = 10
				NOT = {
					owned_by = ROOT
				}
			}
		}
		trigger = {
			OR = {
				stability = 1
				manpower_percentage = 0.9
			}
			bohemia_area = {
				type = all
				NOT = {
					devastation = 10
				}
				owned_by = ROOT
			}
			moravia_area = {
				type = all
				NOT = {
					devastation = 10
				}
				owned_by = ROOT
			}
			erzgebirge_area = {
				type = all
				NOT = {
					devastation = 10
				}
				owned_by = ROOT
			}
		}
		effect = {
			custom_tooltip = boh_remove_all_devastation
			add_country_modifier = {
				name = boh_recovered_from_hussite_wars
				duration = 9125
			}
			if = {
				limit = {
					has_country_modifier = boh_hussite_destruction
				}
				remove_country_modifier = boh_hussite_destruction
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							area = bohemia_area
							area = moravia_area
							area = erzgebirge_area
						}
					}
					add_devastation = -100
				}
			}
		}
	}
	boh_the_golden_city = {
		icon = mission_the_golden_city
		position = 9
		required_missions = { boh_bohemian_crystal boh_recover_from_hussite_wars boh_bohemian_industry }
		provinces_to_highlight = {
			province_id = 266
		}
		trigger = {
			owns = 266
			266 = {
				development = 30
			}
			266 = {
				num_of_buildings_in_province = 3
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Leviathan"
				}
				custom_tooltip = boh_expand_infrastructure_prague
				set_country_flag = boh_expand_infrastructure_prague_flag
			}
			else = {
				266 = {
					add_base_tax = 1
					add_base_production = 1
					add_base_manpower = 1
				}
			}
			266 = {
				add_province_modifier = {
					name = "boh_golden_city"
					duration = -1
				}
			}
			if = {
				limit = {
					NOT = {
						any_province = {
							continent = europe
							higher_development_than = 266
						}
					}
				}
				custom_tooltip = boh_prague_most_developed_yes
				tooltip = {
					if = {
						limit = {
							has_dlc = "Mandate of Heaven"
						}
						add_splendor = 200
					}
					else = {
						change_government_reform_progress = 100
					}
				}
			}
			else = {
				custom_tooltip = boh_prague_most_developed_no
				tooltip = {
					if = {
						limit = {
							has_dlc = "Mandate of Heaven"
						}
						add_splendor = 200
					}
					else = {
						change_government_reform_progress = 100
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							any_province = {
								continent = europe
								higher_development_than = 266
							}
						}
					}
					if = {
						limit = {
							has_dlc = "Mandate of Heaven"
						}
						add_splendor = 200
					}
					else = {
						change_government_reform_progress = 100
					}
				}
			}
		}
	}
	boh_reform_the_bergordnung = {
		icon = reform_bergordnung
		position = 10
		required_missions = { boh_the_golden_city }
		provinces_to_highlight = {
			owned_by = ROOT 
			NOT = { has_manufactory_trigger = yes }
		}
		trigger = {
			num_of_owned_provinces_with = {
				has_manufactory_trigger = yes
				value = 20
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Rights of Man"
				}
				add_ruler_personality = industrious_personality
			}
			else = {
				add_mercantilism = 5
			}
			unlock_government_reform = {
				government_reform = bergordnung_reforms_reform
			}
		}
	}
	boh_czech_heavy_industry = {
		icon = mission_rb_build_furnaces
		position = 11
		required_missions = { boh_reform_the_bergordnung }
		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					has_manufactory_trigger = yes
				}
				AND = {
					owner = {
						capital_scope = {
							continent = europe
						}
						monthly_income = ROOT
					}
					is_capital = yes
				}
			}
		}
		trigger = {
			development_in_provinces = {
				has_manufactory_trigger = yes
				value = 300
			}
			custom_trigger_tooltip = {
				tooltip = boh_most_income_europe
				NOT = {
					any_country = {
						capital_scope = {
							continent = europe
						}
						monthly_income = ROOT
					}
				}
			}
		}
		effect = {
			custom_tooltip = boh_manufactories_development_tt
			custom_tooltip = boh_province_industrial_bonus_tt
			tooltip = {
				add_province_modifier = {
					name = boh_workshop_of_the_world
					duration = -1
				}
			}
			hidden_effect = {		
                for = {
                    amount = 10
                    effect = "
                        random_owned_province = {
							limit = {
								has_manufactory_trigger = yes
							}
							add_base_production = 1
                        }
                    "
                }
			}
			if = {
				limit = {
					monthly_income = 500
				}
				custom_tooltip = boh_500_income_tt_yes
			}
			else = {
				custom_tooltip = boh_500_income_tt_no
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							area = bohemia_area 
							area = erzgebirge_area
							area = moravia_area
						}
					}
					add_province_modifier = {
						name = boh_workshop_of_the_world
						duration = -1
					}
				}
				if = {
					limit = {
						monthly_income = 500
					}
					every_owned_province = {
						limit = {
							has_province_modifier = boh_workshop_of_the_world
						}
						remove_province_modifier = boh_workshop_of_the_world
					}
					every_owned_province = {
						limit = {
							OR = {
								area = bohemia_area 
								area = erzgebirge_area
								area = moravia_area
							}
						}
						add_province_modifier = {
							name = boh_workshop_of_the_world2
							duration = -1
						}
					}
				}
			}
		}
	}
	boh_the_balance_of_power = {
		icon = balance_of_power
		position = 12
		required_missions = {  }
		provinces_to_highlight = {
			is_capital = yes
			if = {
				limit = {
					ROOT = {
						total_development = 1000
						NOT = {
							any_country = {
								root = { is_rival = prev }
							}
						}
					}
				}
				is_capital = yes
				owner = {
					army_size = root
				}
			}
			else = {
				OR = {
					AND = {
						owned_by = root
						root = { is_great_power = no }
					}
					AND = {
						NOT = { owned_by = root }
						owner = {
							is_great_power = yes
							NOT = { alliance_with = root }
							NOT = { is_rival = root }
						}
						root = {
							OR = {
								NOT = {
									any_rival_country = {
										is_great_power = yes
									}
								}
								NOT = {
									any_ally = {
										is_great_power = yes
									}
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			if = {
				limit = {
					total_development = 1000
					NOT = {
						any_country = {
							root = { is_rival = prev }
						}
					}
				}
				all_country = {
					NOT = {
						army_size = root
					}
				}
			}
			else = {
				if = {
					limit = {
						OR = {
							has_dlc = "Emperor"
							has_dlc = "Rights of Man"
						}
					}
					is_great_power = yes
				}
				else = {
					total_own_and_non_tributary_subject_development = 300
				}
				num_of_wars = { amount = 5 }
			}
		}
		effect = {
			add_country_modifier = {
				name = hab_balance_of_power_mod
				duration = 7300
			}

			custom_tooltip = HAB_MODIFY_DIPLOMAT_ADVISOR
			set_country_flag = hab_diplomat_grants_ae_impact
		}
	}
	boh_the_ostend_company = {
		icon = the_ostend_company
		position = 13
		required_missions = { boh_the_balance_of_power }
		trigger = {
			if = {
				limit = {
					OR = {
						has_dlc = "Dharma"
						has_dlc = "Wealth of Nations"
					}
				}
				any_owned_province = {
					is_owned_by_trade_company = yes
					continent = asia
				}
			}
			else = {
				num_of_owned_provinces_with = {
					value = 10
					is_overseas = yes
					NOT = { continent = north_america }
					NOT = { continent = south_america }
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = hab_ostend_company_1
				duration = -1
			}

			custom_tooltip = emp_hab_ostend_company_effect_tooltip
			hidden_effect = {
				india_superregion = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_port = yes
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
				east_indies_superregion = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_port = yes
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
		}
	}
}

boh_fourth_branch = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
	}
	has_country_shield = yes

	boh_secure_the_vistula = {
		icon = jageillonian_union
		position = 3
		required_missions = { boh_consolidate_silesia }
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						province_id = 262
						province_id = 2960
					}
					NOT = {
						country_or_non_sovereign_subject_holds = ROOT 
					}
				}
				province_id = 262
			}
		}
		trigger = {
			262 = {
				country_or_non_sovereign_subject_holds = ROOT 
			}
			2960 = {
				country_or_non_sovereign_subject_holds = ROOT 
			}
			262 = {
				num_of_times_improved = 3
			}
			262 = {
				has_trade_building_trigger = yes
			}
			262 = {
				trade_share = {
					country = ROOT
					share = 20
				}
			}
		}
		effect = {
			262 = {
				add_or_upgrade_trade_building = yes
			}
			262 = {
				add_center_of_trade_level = 1
			}
			custom_tooltip = boh_empty
			sandomierz_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			red_ruthenia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					262 = {
						trade_share = {
							country = ROOT
							share = 30
						}
					}
				}
				custom_tooltip = boh_30_trade_krakow_tt_yes
				tooltip = {
					define_advisor = {
						type = trader
						skill = 3
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
			else = {
				custom_tooltip = boh_30_trade_krakow_tt_no
				tooltip = {
					define_advisor = {
						type = trader
						skill = 3
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						262 = {
							trade_share = {
								country = ROOT
								share = 30
							}
						}
					}
					define_advisor = {
						type = trader
						skill = 3
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
		}
	}
	boh_lifetime_of_war = {
		icon = mission_plc_lifetime_of_war
		position = 5
		required_missions = { boh_establish_zapadoslavia }
		trigger = {
			if = {
				limit = { has_dlc = "Cradle of Civilization" }
				army_professionalism = 1 
			}
			else = { army_tradition = 95 } 
			army_size = 150 
			if = { 
				limit = { 
					has_estate = estate_cossacks 
					has_dlc = "Lions of the North"
				} 
				OR = { 
					num_of_hussars = 8 
					AND = { 
						estate_loyalty = { 
							estate = estate_cossacks 
							loyalty = 60 
						}
						num_of_estate_privileges = {
							estate = estate_cossacks
							value = 5 
						}
					}
					has_global_modifier_value = {
						which = infantry_power 
						value = 0.35 
					}
					has_global_modifier_value = {
						which = discipline  
						value = 0.25
					}
				}
			}
			else_if = { 
				limit = { 
					has_estate = estate_cossacks
				} 
				OR = { 
					num_of_cavalry = 65 
					AND = { 
						estate_loyalty = { 
							estate = estate_cossacks 
							loyalty = 60 
						}
						num_of_estate_privileges = {
							estate = estate_cossacks
							value = 5 
						}
					}
					has_global_modifier_value = {
						which = infantry_power 
						value = 0.35 
					}
					has_global_modifier_value = {
						which = discipline  
						value = 0.25
					}
				}
			}
			else_if = { 
				limit = { has_dlc = "Lions of the North" }
				OR = { 
					num_of_hussars = 8 
					has_global_modifier_value = {
						which = infantry_power 
						value = 0.35 
					}
					has_global_modifier_value = {
						which = discipline  
						value = 0.25
					}
				}
			}
			else = {
				OR = { 
					num_of_cavalry = 65
					has_global_modifier_value = {
						which = infantry_power 
						value = 0.35 
					}
					has_global_modifier_value = {
						which = discipline  
						value = 0.25
					}
				}
			}
		}
		effect = {
			country_event = { id = flavor_pol.27 }
		}
	}
	boh_breadbasket_of_europe = {
		icon = mission_pol_breadbasket_europe
		position = 6
		required_missions = { boh_balance_princely_lands }
		provinces_to_highlight = { 
			country_or_non_sovereign_subject_holds = ROOT  
			trade_goods = grain 
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				trade_goods = grain 
				has_production_building_trigger = yes 
				value = 14
			}
			if = { 
				limit = { has_dlc = "Mandate of Heaven" }
				OR = {	
					trading_part = {
						trade_goods = grain
						value = 0.15
					}
					has_age_ability = ab_polish_legitimacy
				}
			}
			else = { 
				trading_part = {
					trade_goods = grain
					value = 0.15
				}
			}
		}
		effect = {
			custom_tooltip = pol_every_grain_province_tt
			tooltip = {
				add_province_modifier = {
					name = pol_breadbasket_europe_modifier
					duration = 7300 
				}
			}
			change_price = {
				trade_goods = grain
				key = polish_grain
				value = 0.2
				duration = 5475
			}
			hidden_effect = { 
				every_owned_province = {
					limit = {
						trade_goods = grain 
						has_production_building_trigger = yes 
					}
					add_province_modifier = {
						name = pol_breadbasket_europe_modifier
						duration = 7300 
					}
				}
			}
		}
	}
	boh_bohemian_industry = {
		icon = mission_have_manufactories
		position = 8
		required_missions = {  }
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = ROOT
			NOT = {
				has_production_building_trigger = yes
			}
		}
		trigger = {
			OR = {
				monthly_income = 20
				production_income_percentage = 0.25
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				has_production_building_trigger = yes
			}
		}
		effect = {
			add_years_of_owned_provinces_production_income = {
				years = 2
				trigger = {
					always = yes
				}
				custom_tooltip = boh_from_2_years_of_prod_income
			}
			add_country_modifier = {
				name = boh_early_industrialization
				duration = 5475
			}
			custom_tooltip = boh_developing_bonus_tt
		}
	}
	boh_univerzita_karlova = {
		icon = mission_early_modern_university
		position = 10
		required_missions = { boh_the_golden_city }
		provinces_to_highlight = {
			province_id = 266
			OR = {
				NOT = {
					owned_by = ROOT
				}
				NOT = {
					has_building = university
				}
			}
		}
		trigger = {
			owns = 266
			266 = {
				has_building = university
			}
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
			has_mil_advisor_3 = yes
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Rights of Man"
				}
				custom_tooltip = boh_prevent_negative_traits
				set_country_flag = boh_prevent_negative_traits
			}
			else = {
				change_government_reform_progress = 100
			}
			if = {
				limit = {
					tag = BOH
				}
				custom_tooltip = boh_empower_ni_yes
			}
			else = {
				custom_tooltip = boh_empower_ni_no
			}
			if = {
				limit = {
					NOT = {
						tag = BOH
					}
				}
				custom_tooltip = boh_not_empower_ni_yes
				tooltip = {
					add_country_modifier = {
						name = czech_nationalism
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = boh_not_empower_ni_no
				tooltip = {
					add_country_modifier = {
						name = czech_nationalism
						duration = -1
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						tag = BOH
					}
					set_country_flag = boh_empowered_ni
					swap_free_idea_group = yes
				}
				else = {
					add_country_modifier = {
						name = czech_nationalism
						duration = -1
					}
				}
			}
		}
	}
	boh_settle_new_world = {
		icon = mission_explore_the_world
		position = 14
		required_missions = { boh_the_ostend_company }
		provinces_to_highlight = {
			OR = {
				region = australia_region
				superregion = south_america_superregion
				superregion = andes_superregion
				superregion = central_america_superregion
				superregion = north_america_superregion	
			}
			ROOT = {
				NOT = {
					any_subject_country = {
						is_colonial_nation = yes
						capital_scope = {
							OR = {
								region = australia_region
								superregion = south_america_superregion
								superregion = andes_superregion
								superregion = central_america_superregion
								superregion = north_america_superregion	
							}
						}
						any_owned_province = {
							OR = {
								region = australia_region
								superregion = south_america_superregion
								superregion = andes_superregion
								superregion = central_america_superregion
								superregion = north_america_superregion	
							}
						}
					}
				}
			}
		}
		trigger = {
			any_subject_country = {
				is_colonial_nation = yes
			}
		}
		effect = {
			custom_tooltip = HAB_MODIFY_OSTEND_COMPANY_1
			hidden_effect = {
				remove_country_modifier = hab_ostend_company_1
				add_country_modifier = {
					name = hab_ostend_company_2
					duration = -1
				}
			}

			custom_tooltip = SEPERATOR_TOOLTIP

			43 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 25
					key = LAND_DOWNUNDER
				}
			}
		}
	}
}

boh_fifth_branch = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
	}
	has_country_shield = yes

	boh_consolidate_silesia = {
		icon = take_silesia
		position = 2
		required_missions = { boh_hussite_wars_aftermath }
		provinces_to_highlight = {
			area = silesia_area
			OR = {
				NOT = {
					owned_by = ROOT
				}
				local_autonomy = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					SIL = {
						has_opinion = {
							who = ROOT
							value = 200
						}
						NOT = {
							liberty_desire = 1
						}
					}
					silesia_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				AND = {
					NOT = {
						exists = SIL
					}
					silesia_area = {
						type = all
						owned_by = ROOT
					}
					silesia_area = {
						type = all
						NOT = {
							local_autonomy = 10
						}
					}
				}
			}
		}
		effect = {
			wielkopolska_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			central_poland_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			malopolska_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					SIL = {
						has_opinion = {
							who = ROOT
							value = 200
						}
						NOT = {
							liberty_desire = 1
						}
					}
				}
				custom_tooltip = boh_silesia_diplomatic_tt_yes
				tooltip = {
					custom_tooltip = boh_create_silesia_vassal_tt
				}
			}
			else = {
				custom_tooltip = boh_silesia_diplomatic_tt_no
				tooltip = {
					custom_tooltip = boh_create_silesia_vassal_tt
				}
			}
			if = {
				limit = {
					NOT = {
						exists = SIL
					}
					silesia_area = {
						type = all
						owned_by = ROOT
					}
					silesia_area = {
						type = all
						NOT = {
							local_autonomy = 10
						}
					}
				}
				custom_tooltip = boh_silesia_conquer_tt_yes
				tooltip = {
					silesia_area = {
						add_base_tax = 1
					}
					silesia_area = {
						add_nationalism = -10
					}
				}
			}
			else = {
				custom_tooltip = boh_silesia_conquer_tt_no
				tooltip = {
					silesia_area = {
						add_base_tax = 1
					}
					silesia_area = {
						add_nationalism = -10
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							exists = SIL
						}
						silesia_area = {
							type = all
							owned_by = ROOT
						}
						silesia_area = {
							type = all
							NOT = {
								local_autonomy = 10
							}
						}
					}
					silesia_area = {
						add_base_tax = 1
					}
					silesia_area = {
						add_nationalism = -10
					}
				}
				else_if = {
					limit = {
						if = {
							limit = {
								SIL = {
									has_opinion = {
										who = ROOT
										value = 200
									}
									NOT = {
										liberty_desire = 1
									}
								}
							}
						}
					}
					create_subject = {
						subject_type = incorporated_vassal
						subject = SIL
						keep_liberty_desire = yes
					}
					SIL = {
						set_country_flag = free_incorporated_vassal
						custom_tooltip = WoC_free_integrated_vassal_str
					}
				}
			}
		}
	}
	boh_polish_diplomacy = {
		icon = polish_diplomacy
		position = 4
		required_missions = { boh_consolidate_silesia }
		provinces_to_highlight = {
			if = {
				limit = {
					exists = POL
				}
				owned_by = POL
			}
			else_if = {
				limit = {
					exists = PLC
				}
				owned_by = PLC
			}
			else = {
				region = poland_region
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		trigger = {
			if = {
				limit = { exists = POL }
				OR = {
					army_size = POL 
					prestige = POL 
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 10
						region = poland_region
					}
				}
			}
			else_if = { 
				limit = { exists = PLC }
				OR = {
					army_size = PLC 
					prestige = PLC  
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 10
						region = poland_region
					}
				}
			}
			else = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 12
					region = poland_region
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = "boh_premyslid_heritage_1"
				duration = -1
			}
			if = {
				limit = {
					exists = POL
				}
				if = {
					limit = {
						valid_for_personal_unions_trigger = yes
						exists = POL
						POL = {
							valid_for_personal_unions_trigger = yes
						}
					}
					custom_tooltip = boh_cb_poland_tt_yes
					tooltip = {
						add_casus_belli = {
							type = cb_restore_personal_union
							months = 300
							target = POL
						}
					}
				}
				else = {
					custom_tooltip = boh_cb_poland_tt_no
					tooltip = {
						add_casus_belli = {
							type = cb_restore_personal_union
							months = 300
							target = POL
						}
					}
				}
			}
			else_if = {
				limit = {
					exists = PLC
				}
				if = {
					limit = {
						valid_for_personal_unions_trigger = yes
						exists = PLC
						PLC = {
							valid_for_personal_unions_trigger = yes
						}
					}
					custom_tooltip = boh_cb_plc_tt_yes
					tooltip = {
						add_casus_belli = {
							type = cb_restore_personal_union
							months = 300
							target = PLC
						}
					}
				}
				else = {
					custom_tooltip = boh_cb_plc_tt_no
					tooltip = {
						add_casus_belli = {
							type = cb_restore_personal_union
							months = 300
							target = PLC
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						OR = {
							exists = POL
							exists = PLC
						}
					}
				}
				custom_tooltip = boh_neither_pol_nor_plc_tt_yes
				tooltip = {
					poland_region = {
						limit = {
							NOT = { is_permanent_claim = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				custom_tooltip = boh_neither_pol_nor_plc_tt_no
				tooltip = {
					poland_region = {
						limit = {
							NOT = { is_permanent_claim = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						valid_for_personal_unions_trigger = yes
						exists = PLC
						PLC = {
							valid_for_personal_unions_trigger = yes
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = PLC
					}
				}
				else_if = {
					limit = {
						valid_for_personal_unions_trigger = yes
						exists = POL
						POL = {
							valid_for_personal_unions_trigger = yes
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = POL
					}
				}
				else = {
					poland_region = {
						limit = {
							NOT = { is_permanent_claim = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}
	boh_vessalius_heritage = {
		icon = mission_premyslid_heritage
		position = 5
		required_missions = { boh_polish_diplomacy }
		provinces_to_highlight = {
			region = poland_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				region = poland_region
			}
		}
		effect = {
			custom_tooltip = boh_upgrade_premyslid_heritage_tt
			east_prussia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			west_prussia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					OR = {
						POL = {
							is_subject_of = ROOT
						}
						PLC = {
							is_subject_of = ROOT
						}
					}
				}
				custom_tooltip = boh_pol_subject_tt_yes
			}
			else = {
				custom_tooltip = boh_pol_subject_tt_no
			}
			hidden_effect = {
				if = {
					limit = {
						has_country_modifier = boh_premyslid_heritage_1
					}
					remove_country_modifier = boh_premyslid_heritage_1
					add_country_modifier = {
						name = "boh_premyslid_heritage_2"
						duration = -1
					}
				}
				if = {
					limit = {
						OR = {
							POL = {
								is_subject_of = ROOT
							}
							PLC = {
								is_subject_of = ROOT
							}
						}
					}
					if = {
						limit = {
							POL = {
								is_subject_of = ROOT
							}
						}
						POL = {
							add_historical_friend = ROOT
						}
						ROOT = {
							add_historical_friend = POL
						}
					}
					else_if = {
						limit = {
							PLC = {
								is_subject_of = ROOT
							}
						}
						PLC = {
							add_historical_friend = ROOT
						}
						ROOT = {
							add_historical_friend = PLC
						}
					}
				}
			}
		}
	}
	boh_prussian_lands = {
		icon = mission_king_of_eastern_europe
		position = 6
		required_missions = { boh_vessalius_heritage }
		provinces_to_highlight = { 
			OR = { 
				area = east_prussia_area 
				area = west_prussia_area 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}
		trigger = {
			OR = {
				AND = { 
					west_prussia_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT	
					}
					east_prussia_area = {
						type = all 
						country_or_non_sovereign_subject_holds = ROOT 
					}
				}
				AND = {
					custom_trigger_tooltip = {
						tooltip = support_confederation_tooltip
						has_country_flag = supported_prussian_confederation_flag
					}
					exists = DNZ
					DNZ = {
						is_at_war = no
						is_subject = no
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					has_country_flag = supported_prussian_confederation_flag
					exists = DNZ
					DNZ = {
						is_subject = no
						is_at_war = no
						NOT = { total_development = 100 }
					}
				}
				country_event = { id = flavor_teu.3 }
				custom_tooltip = vassalize_danzig_tooltip
			}
			else_if = {
				limit = {
					any_subject_country = {
						any_owned_province = {
							area = west_prussia_area
						}
					}
				}
				west_prussia_area = {
					limit = {
						NOT = { is_core = ROOT	}
					}
					add_core = ROOT
				}
			}
			43 = {
				add_base_tax = 1 
				add_base_production = 1 
				add_province_modifier = {
					name = pol_developing_port_modifier
					duration = 5475 
				}
			}
			podlasie_area = {
				limit = {
					NOT = { is_core = ROOT	}
					NOT = { owned_by = ROOT } 
				}
				add_permanent_claim = ROOT
			}
			pripyat_area = {
				limit = {
					NOT = { is_core = ROOT	}
					NOT = { owned_by = ROOT } 
				}
				add_permanent_claim = ROOT
			}
			volhynia_area = {
				limit = {
					NOT = { is_core = ROOT	}
					NOT = { owned_by = ROOT } 
				}
				add_permanent_claim = ROOT
			}
		}
	}
	boh_restore_kralovec = {
		icon = develop_konigsberg
		position = 7
		required_missions = { boh_prussian_lands }
		provinces_to_highlight = {
			OR = {
				province_id = 41
				AND = {
					has_port = yes
					sea_zone = {
						area = baltic_area
					}
					higher_development_than = 41
				}
			}
		}
		trigger = {
			41 = {
				country_or_non_sovereign_subject_holds = ROOT 
			}
			41 = {
				development = 25
			}
			41 = {
				religion = ROOT
			}
			41 = {
				NOT = {
					num_free_building_slots = 1
				}
			}
			custom_trigger_tooltip = {
				tooltip = boh_baltic_dev_tt
				NOT = {
					any_province = {
						has_port = yes
						sea_zone = {
							area = baltic_area
						}
						higher_development_than = 41
					}
				}
			}
		}
		effect = {
			41 = {
				add_base_production = 3
			}
			41 = {
				add_province_modifier = {
					name = "boh_pearl_of_the_baltics"
					duration = -1
				}
			}
			41 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 50
					key = BOH_AMBER_ROAD
				}
			}
		}
	}
	boh_bohemian_reinassance = {
		icon = mission_pol_polish_renaissance
		position = 8
		required_missions = {  }
		trigger = {
			has_institution = renaissance 
			is_in_deficit = no 
			NOT = { corruption = 1 } 
			share_of_starting_income = 1.5 
		}
		effect = {
			country_event = { id = flavor_pol.5100 }
			if = { 
				limit = { has_dlc = "Rule Britannia" }
				add_ruler_modifier = {
					name = pol_incentives_modifier
					duration = -1 
				}
			}
			else = { 
				add_ruler_modifier = {
					name = pol_incentives2_modifier
					duration = -1 
				}
			}
			hidden_effect = {
				if = {
					limit = {
						religion = catholic 
					}
					clr_country_flag = boh_hussite_missions
					clr_country_flag = boh_catholic_missions
					set_country_flag = boh_catholic_missions
					swap_non_generic_missions = yes
					select_current_missions = {
						key = BOH_RELIGION
					}
					add_country_modifier = {
						name = "boh_purge_hussites"
						duration = 7300
					}
				}
				else = {
					clr_country_flag = boh_hussite_missions
					clr_country_flag = boh_catholic_missions
					set_country_flag = boh_hussite_missions
					swap_non_generic_missions = yes
					select_current_missions = {
						key = BOH_RELIGION
					}
					add_country_modifier = {
						name = "hussite_conversions"
						duration = 7300
					}
				}
			}
		}
	}
}

boh_religion_locked = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
		NOT = {
			OR = {
				has_country_flag = boh_hussite_missions
				has_country_flag = boh_catholic_missions
			}
		}
	}
	has_country_shield = yes

	boh_branching1 = {
		icon = mission_unknown_mission
		required_missions = { boh_bohemian_reinassance }
		position = 9
		
		trigger = { custom_trigger_tooltip = { tooltip = BOH_RELIGION_BRANCHING always = no } }
		
		effect = {
			custom_tooltip = BOH_RELIGION_BRANCHING
		}
	}
	
	boh_branching2 = {
		icon = mission_unknown_mission
		required_missions = { boh_branching1 }
		position = 10
		
		trigger = { custom_trigger_tooltip = { tooltip = BOH_RELIGION_BRANCHING always = no } }
		
		effect = {
			custom_tooltip = BOH_RELIGION_BRANCHING
		}
	}
	boh_printing_movement = {
		icon = mission_state_manufactories
		position = 11
		required_missions = { boh_univerzita_karlova boh_branching2 }
		provinces_to_highlight = { province_id = 4538 }
		trigger = {
			4538 = { 
				base_production = 15 
				has_manufactory_trigger = yes 
			}
			has_institution = printing_press 
			num_of_merchants = 4 
		}
		effect = {
			4538 = { 
				change_trade_goods = paper 
				add_province_modifier = { 
					name = pol_major_printing_center_modifier
					duration = -1 
				}
			}
			generate_scaled_advisor_of_type_and_cost_effect = {
				type = natural_scientist
				cost_multiplier = 0.25 
			}
		}
	}
}

boh_hussite_branch = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
		has_country_flag = boh_hussite_missions
		NOT = {
			has_country_flag = boh_catholic_missions
		}
	}
	has_country_shield = yes

	boh_hussite_resurgence = {
		icon = hussite_regency
		required_missions = { boh_bohemian_reinassance }
		position = 9
		
		trigger = {
			not_in_mission_preview_mode = { key = BOH_RELIGION }
			bohemia_area = {
				type = all
				religion = hussite
				owned_by = ROOT
			}
			moravia_area = {
				type = all
				religion = hussite
				owned_by = ROOT
			}
			erzgebirge_area = {
				type = all
				religion = hussite
				owned_by = ROOT
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = bohemia_area
				area = moravia_area
				area = erzgebirge_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { religion = hussite }
			}
		}
		
		effect = {
			if = {
				limit = {
					religion = hussite
				}
				custom_tooltip = boh_hussite_tt_yes
				tooltip = {
					custom_tooltip = boh_hussite_reform_center_tt
					add_country_modifier = {
						name = "boh_spread_word_of_hus"
						duration = 7300
					}
				}
			}
			else = {
				custom_tooltip = boh_hussite_tt_no
				tooltip = {
					custom_tooltip = boh_hussite_reform_center_tt
					add_country_modifier = {
						name = "boh_spread_word_of_hus"
						duration = 7300
					}
				}
			}
			if = { #fallback reward
				limit = {
					NOT = {
						religion = hussite
					}
				}
				custom_tooltip = boh_not_hussite_tt_yes
				tooltip = {
					add_country_modifier = {
						name = "boh_hussite_revolt"
						duration = 7300
					}
				}
			}
			else = {
				custom_tooltip = boh_not_hussite_tt_no
				tooltip = {
					add_country_modifier = {
						name = "boh_hussite_revolt"
						duration = 7300
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						religion = hussite
					}
					266 = {
						add_reform_center = hussite
					}
					hidden_effect = {
						266 = {
							province_event = {
								id = flavor_boh.13
								days = 36500
							}
						}
					}
					add_country_modifier = {
						name = "boh_spread_word_of_hus"
						duration = 7300
					}
				}
				else = {
					add_country_modifier = {
						name = "boh_hussite_revolt"
						duration = 7300
					}
				}
			}
		}
	}
	
	boh_defenestrate_the_heretics = {
		icon = defenestrate_the_heretics
		required_missions = { boh_hussite_resurgence }
		position = 10
		
		trigger = {
			not_in_mission_preview_mode = { key = BOH_RELIGION }
			OR = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 30
					religion = ROOT
				}
				calc_true_if = {
					all_country = {
						religion = ROOT
					}
					amount = 10
				}
			}
		}
		
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = {
				religion = ROOT
			}
		}
		
		effect = {
			if = {
				limit = {
					religion = hussite
				}
				custom_tooltip = boh_hussite_tt_yes
				tooltip = {
					custom_tooltip = boh_rekindle_hussite_wars_tt
					add_country_modifier = {
						name = "defenestrations_of_prague"
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = boh_hussite_tt_no
				tooltip = {
					custom_tooltip = boh_rekindle_hussite_wars_tt
					add_country_modifier = {
						name = "defenestrations_of_prague"
						duration = -1
					}
				}
			}
			if = { #fallback reward
				limit = {
					NOT = {
						religion = hussite
					}
				}
				custom_tooltip = boh_not_hussite_tt_yes
				tooltip = {
					add_country_modifier = {
						name = "defenestrations_of_prague"
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = boh_not_hussite_tt_no
				tooltip = {
					add_country_modifier = {
						name = "defenestrations_of_prague"
						duration = -1
					}
				}
			}
			hidden_effect = {
				add_country_modifier = {
					name = "defenestrations_of_prague"
					duration = -1
				}
			}
		}
	}
	boh_printing_movement = {
		icon = mission_state_manufactories
		position = 11
		required_missions = { boh_univerzita_karlova boh_defenestrate_the_heretics }
		provinces_to_highlight = { province_id = 4538 }
		trigger = {
			4538 = { 
				base_production = 15 
				has_manufactory_trigger = yes 
			}
			has_institution = printing_press 
			num_of_merchants = 4 
		}
		effect = {
			4538 = { 
				change_trade_goods = paper 
				add_province_modifier = { 
					name = pol_major_printing_center_modifier
					duration = -1 
				}
			}
			generate_scaled_advisor_of_type_and_cost_effect = {
				type = natural_scientist
				cost_multiplier = 0.25 
			}
		}
	}
}

boh_catholic_branch = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
		has_country_flag = boh_catholic_missions
		NOT = {
			has_country_flag = boh_hussite_missions
		}
	}
	has_country_shield = yes

	boh_purge_hussites = {
		icon = hussite_regency
		position = 9
		required_missions = { boh_bohemian_reinassance }
		provinces_to_highlight = {
			OR = {
				area = bohemia_area
				area = moravia_area
				area = erzgebirge_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { religion = hussite }
			}
		}
		trigger = {
			not_in_mission_preview_mode = { key = BOH_RELIGION }
			bohemia_area = {
				type = all
				owned_by = ROOT
			}
			custom_trigger_tooltip = {
				tooltip = boh_bohemia_area_religion_tt
				bohemia_area = {
					type = all
					religion = ROOT
				}
			}
			moravia_area = {
				type = all
				owned_by = ROOT
			}
			custom_trigger_tooltip = {
				tooltip = boh_moravia_area_religion_tt
				moravia_area = {
					type = all
					religion = ROOT
				}
			}
			erzgebirge_area = {
				type = all
				owned_by = ROOT
			}
			custom_trigger_tooltip = {
				tooltip = boh_erzgebirge_area_religion_tt
				erzgebirge_area = {
					type = all
					religion = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					religion = catholic
				}
				custom_tooltip = boh_unlock_catholic_branching_tt_yes
				tooltip = {
					add_reform_desire = -0.02
					add_papal_influence = 20
					define_advisor = {
						type = theologian
						skill = 2
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
			else = {
				custom_tooltip = boh_unlock_catholic_branching_tt_no
				tooltip = {
					add_reform_desire = -0.02
					add_papal_influence = 20
					define_advisor = {
						type = theologian
						skill = 2
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
			if = { #fallback reward
				limit = {
					NOT = {
						religion = catholic
					}
				}
				custom_tooltip = boh_empty
				custom_tooltip = boh_not_catholic_tt_yes
				tooltip = {
					add_dip_power = 50
					define_advisor = {
						type = theologian
						skill = 2
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
			else = {
				custom_tooltip = boh_empty
				custom_tooltip = boh_not_catholic_tt_no
				tooltip = {
					add_dip_power = 50
					define_advisor = {
						type = theologian
						skill = 2
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						religion = catholic
					}
					add_reform_desire = -0.02
					add_papal_influence = 20
					define_advisor = {
						type = theologian
						skill = 2
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
				else = {
					add_dip_power = 50
					define_advisor = {
						type = theologian
						skill = 2
						culture = ROOT
						religion = ROOT
						cost_multiplier = 0.25
					}
				}
			}
		}
	}
	boh_shield_of_the_true_faith = {
		icon = the_holy_league
		position = 10
		required_missions = { boh_purge_hussites }
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = {
				religion = ROOT
			}
		}
		trigger = {
			not_in_mission_preview_mode = { key = BOH_RELIGION }
			is_defender_of_faith = yes
			custom_trigger_tooltip = {
				tooltip = boh_has_won_20_battles_against_heretic_heathen
				check_variable = { which = bohemia_num_of_won_battles_against_heretic_heathen value = 20 }
			}
			custom_trigger_tooltip = {
				tooltip = obj_convert_10_provinces_tooltip
				check_variable = { which = num_converted_religion value = 10 }
			}
		}
		effect = {
			if = {
				limit = {
					religion = catholic
				}
				custom_tooltip = boh_unlock_catholic_branching_tt_yes
				tooltip = {
					custom_tooltip = hun_empower_religious_diplomats_tt
					add_country_modifier = {
						name = boh_shield_of_true_faith
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = boh_unlock_catholic_branching_tt_no
				tooltip = {
					custom_tooltip = hun_empower_religious_diplomats_tt
					add_country_modifier = {
						name = boh_shield_of_true_faith
						duration = -1
					}
				}
			}
			if = { #fallback reward
				limit = {
					NOT = {
						religion = catholic
					}
				}
				custom_tooltip = boh_not_catholic_tt_yes
				tooltip = {
					add_country_modifier = {
						name = boh_shield_of_true_faith
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = boh_not_catholic_tt_no
				tooltip = {
					add_country_modifier = {
						name = boh_shield_of_true_faith
						duration = -1
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						religion = catholic
					}
					set_country_flag = hun_empower_religious_diplomats
					add_country_modifier = {
						name = boh_shield_of_true_faith
						duration = -1
					}
				}
				else = {
					add_country_modifier = {
						name = boh_shield_of_true_faith
						duration = -1
					}
				}
			}
		}
	}

	boh_printing_movement = {
		icon = mission_state_manufactories
		position = 11
		required_missions = { boh_univerzita_karlova boh_shield_of_the_true_faith }
		provinces_to_highlight = { province_id = 4538 }
		trigger = {
			4538 = { 
				base_production = 15 
				has_manufactory_trigger = yes 
			}
			has_institution = printing_press 
			num_of_merchants = 4 
		}
		effect = {
			4538 = { 
				change_trade_goods = paper 
				add_province_modifier = { 
					name = pol_major_printing_center_modifier
					duration = -1 
				}
			}
			generate_scaled_advisor_of_type_and_cost_effect = {
				type = natural_scientist
				cost_multiplier = 0.25 
			}
		}
	}
}

boh_fifth_branch2 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = BOH
			was_tag = BOH
		}
	}
	has_country_shield = yes

	boh_edict_of_education = {
		icon = mission_plc_edict_education
		position = 12
		required_missions = { boh_printing_movement }
		trigger = {
			if = { 
				limit = { has_dlc = "Rule Britannia" } 
				OR = { 
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						has_building = university
						value = 35
					}
					innovativeness = 95
				} 
			}
			else = { 
				prestige = 85
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					has_building = university
					value = 35
				} 
			}
		}
		effect = {
			add_country_modifier = {
				name = pol_reformed_education_system_modifier
				duration = 7300
			}
			custom_tooltip = pol_5_ref_prog_per_university
			hidden_effect = {
				every_owned_province = {
					limit = { has_building = university } 
					owner = { change_government_reform_progress = 5 } 
				}
			}
		}
	}
	boh_beiou = {
		icon = glory_to_von_habsburg
		position = 13
		required_missions = { boh_the_balance_of_power boh_edict_of_education }
		trigger = {
			if = {
				limit = {
					OR = {
						has_dlc = "Emperor"
						has_dlc = "Rights of Man"
					}
					NOT = {
						great_power_rank = 2
					}
				}
			}
			else = {
				total_own_and_non_tributary_subject_development = 1500
			}
			NOT = {
				any_country = {
					army_strength = {
						who = ROOT
						value = 1
					}
				}
			}
			army_size = 250
		}
		effect = {
			add_country_modifier = {
				name = hab_aeiou_modifier
				duration = -1
			}

			custom_tooltip = HAB_ALLOWS_CREATION_OF_INTEGRATED_VASSALS
			set_country_flag = hab_integrated_vassals_flag
		}
	}
}